import{t as e}from"./history-heIjmqaP.js";import{a as t,c as n,l as r,r as i,u as a}from"./index-CuaxoJ3D.js";import{t as o}from"./useProducts-DqW5EwdW.js";var s=a(),c=t(),l=()=>{let t=n(),[a]=r(),l=a.get(`productId`),{products:u,movements:d,addMovement:f}=o(),[p,m]=(0,s.useState)(l||``),[h,g]=(0,s.useState)(``);(0,s.useEffect)(()=>{l&&m(l)},[l]);let _=e=>{e.preventDefault(),!(!p||!h)&&(f(`in`,p,h),g(``),alert(`Entrada registrada com sucesso!`),t(`/products`))},v=d.filter(e=>e.type===`in`);return(0,c.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`1fr 1fr`,gap:`2rem`},children:[(0,c.jsx)(`div`,{children:(0,c.jsxs)(`div`,{className:`card`,children:[(0,c.jsxs)(`h2`,{style:{fontSize:`1.25rem`,fontWeight:`600`,marginBottom:`1.5rem`,display:`flex`,alignItems:`center`,gap:`0.5rem`},children:[(0,c.jsx)(i,{className:`text-success`}),`Registrar Entrada`]}),(0,c.jsxs)(`form`,{onSubmit:_,style:{display:`flex`,flexDirection:`column`,gap:`1.5rem`},children:[(0,c.jsxs)(`div`,{children:[(0,c.jsx)(`label`,{className:`label`,htmlFor:`product`,children:`Produto`}),(0,c.jsxs)(`select`,{id:`product`,className:`input`,value:p,onChange:e=>m(e.target.value),required:!0,children:[(0,c.jsx)(`option`,{value:``,children:`Selecione um produto...`}),u.map(e=>(0,c.jsxs)(`option`,{value:e.id,children:[e.name,` (Atual: `,e.quantity,`)`]},e.id))]})]}),(0,c.jsxs)(`div`,{children:[(0,c.jsx)(`label`,{className:`label`,htmlFor:`quantity`,children:`Quantidade`}),(0,c.jsx)(`input`,{type:`number`,id:`quantity`,className:`input`,value:h,onChange:e=>g(e.target.value),required:!0,min:`1`})]}),(0,c.jsx)(`button`,{type:`submit`,className:`btn btn-primary`,style:{backgroundColor:`var(--success)`},children:`Confirmar Entrada`})]})]})}),(0,c.jsx)(`div`,{children:(0,c.jsxs)(`div`,{className:`card`,children:[(0,c.jsxs)(`h2`,{style:{fontSize:`1.25rem`,fontWeight:`600`,marginBottom:`1.5rem`,display:`flex`,alignItems:`center`,gap:`0.5rem`},children:[(0,c.jsx)(e,{}),`Histórico de Entradas`]}),(0,c.jsx)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`1rem`},children:v.length===0?(0,c.jsx)(`p`,{style:{color:`var(--text-secondary)`},children:`Nenhuma movimentação recente.`}):v.slice(0,10).map(e=>(0,c.jsxs)(`div`,{style:{padding:`1rem`,borderBottom:`1px solid var(--border)`,display:`flex`,justifyContent:`space-between`,alignItems:`center`},children:[(0,c.jsxs)(`div`,{children:[(0,c.jsx)(`p`,{style:{fontWeight:`500`},children:e.productName}),(0,c.jsx)(`p`,{style:{fontSize:`0.75rem`,color:`var(--text-secondary)`},children:new Date(e.date).toLocaleString(`pt-BR`)})]}),(0,c.jsxs)(`span`,{className:`badge badge-success`,children:[`+`,e.quantity]})]},e.id))})]})})]})};export{l as default};